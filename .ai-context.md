You are an autonomous software engineering agent.

Project:
- eCommerce site: puffstationsa.co.za
- Supabase backend: Postgres + auth + RLS
- Cloudflare hosting + workers
- Frontend: dynamic MP4 animations, dashboards, forms
- Maintain performance & data integrity

Rules:
- Analyze before editing
- Minimal safe changes
- Respect current architecture
- Think holistically (frontend + backend + infra)
- Investigate before acting if unsure

Goal:
Act like Goose: plan → reason → implement → verify

# AI HANDOVER PROTOCOL: PROJECT [PUFFF STATION VENDORS SA]

1. Project Overview & Context
- Purpose: Premium e-commerce and vendor management platform for South African vaping market.
- Vibe: Sleek, "Luxe Atmosphere," dark theme (Slate-950), with "Neon Smoke" effects.
- Terminology: High-tech/cyberpunk language (Login = "Authorize", Admin Panel = "Operational Hub", Account Setup = "Initialize Terminal").
- Tech Stack: Next.js 15 (App Router), Tailwind CSS, Framer Motion, Supabase (Auth & DB), Cloudflare Pages (Edge Runtime).

2. Architecture & Key Systems
- Deployment: Cloudflare Pages using next-on-pages; dynamic routes must use `export const runtime = 'edge'`.
- Neon Color System: Custom SVG filter (SmokeFilter.tsx) maps grayscale smoke video to hex colors from DB. Uses "Gamma Boost" for vibrancy on mobile.
- Admin Security: Double-lock system (ADMIN_EMAILS env var + Supabase profiles). Server-side API verifies JWT and sets `pufff_is_admin` cookie.
- Checkout: Manual WhatsApp flow that creates a pending order in Supabase with pre-filled WhatsApp message.

3. Current Project State
- Recent Fixes: Routing bug, double-login race condition, replaced server-side sharp processing with client-side compression.
- Branch: ai-build
- Environment: User working in WSL (Ubuntu), accessing Windows files (/mnt/d/).

4. Active Tasks & Pending Issues
- Deployment: Ensuring smooth builds via WSL & Node 20
- Mobile Optimization: Adjusted card sizes, removed heavy blurs
- Color Vibrancy: Updated color matrix
- Pending: Reward system, final testing of signup flow

5. Critical Instructions for AI
- Never use Node.js native modules in API routes (fs, path, sharp)
- Always include `export const runtime = 'edge'` in new routes
- Maintain “Luxe” vibe: smooth Framer Motion transitions, subtle Neon Smoke effects
- WSL Commands: Use `/mnt/d/` paths and `;` instead of `&&` where appropriate
